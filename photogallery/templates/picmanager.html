<div class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog"
aria-labelledby="PicManager" aria-hidden="true">

	<div class="modal-dialog modal-lg">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
				<h4 class="modal-title" id="PicManager">
					Administrar imágenes de la galería ({% if editing %}{{title}}{% else %}Nueva Galería{%endif%})
				</h4>
			</div>

			<div class="modal-body">
				<ul class="nav nav-tabs" id="image_tabs">
					<li class="active"><a href="#choose" data-toggle="tab">Elegir imágenes</a></li>
					<li><a href="#upload" data-toggle="tab">Agregar Imágenes</a></li>
				</ul>

				<div class="tab-content">
					<div class="tab-pane fade in active" id="choose">
						{% include "browse.html"%}
						</div>
					</div>


					<div class="tab-pane fade" id="upload">

						<div class="container">
							<h3>Agregar una imagen</h3>
							<div class="col-md-8">

								<form role="form" id="uploadForm" enctype="multipart/form-data"
								action="{% url "photogallery.views.upload" %}" method="POST">
									{% csrf_token %}

									{% for field in image_form %}

									<div class="form-group {% if field.errors %} has-error{% endif %}">

										{% if not form.this_is_the_login_form.errors %}
										<label class="control-label required" for="{{field.field.id}}">
											{{field.label}}:
										</label>
										{% endif %}

										{% if field.errors %}
										<span class="help-inline text-danger">
											{{field.errors}}
										</span>
										{% endif %}

										<div class="input-group">
											<span class="input-group-addon">
												<span class="glyphicon glyphicon-asterisk"></span>
											</span>
											{{ field }}
										</div>
									</div>

									{% endfor %}

									<div class="form-group" style="text-align:right;">
										<a href="{% if editing %}../../{% else %}../{% endif %}" class="btn btn-danger">
											Cancelar
										</a>
										<button type="submit" id="send_form" class="btn btn-success">
											Subir Imagen
										</button>
									</div>
								</form>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
				<button type="button" id="confirm_images" class="btn btn-primary">Guardar cambios</button>
			</div>
		</div>
	</div>

</div>

<script type="text/javascript">
	$(document).ready(function(){
		clear_fields();
	});
	var clear_fields = function(){
		$("#id_media_type li:first").detach()

		$("#id_media_type li :radio:first").attr("checked", "checked");
		$("#id_url, #id_code").parents(".form-group").hide();
		//alert($("input[name=ad_type][value=1]").("color"))
		$("#id_media_type").siblings(".input-group-addon").detach()

		$("#id_media_type li :radio").change(function(){
			if($(this).val()=='i'){
				$("#id_url, #id_code").parents(".form-group").fadeOut(function(){
					$("#id_image").parents(".form-group").slideDown();
				});

			}else if($(this).val()=='u'){
				$("#id_image, #id_code").parents(".form-group").fadeOut(function(){
					$("#id_url").parents(".form-group").slideDown();
				});

			}else{
				$("#id_image, #id_url").parents(".form-group").fadeOut(function(){
					$("#id_code").parents(".form-group").slideDown();
				});
			}
		})
	}
</script>
